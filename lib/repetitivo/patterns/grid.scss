@import "../config/grid";
@import "../config/typography/base";

@import "../functions/grid-column-width";

@import "../helpers/exports";
@import "../helpers/respond-to";

@import "./spacing";

@mixin grid-item($columns-and-context, $breakpoint: null) {
  $columns: null;
  $context: null;
  $columns-modifier: null;

  @if type-of($columns-and-context) == number {
    $columns: $columns-and-context;
    $context: null;
    $columns-modifier: "--#{$columns}";
  } @else {
    $columns: nth($columns-and-context, 1);
    $context: nth($columns-and-context, 3);
    $columns-modifier: "--#{$columns}-of-#{$context}";
  }

  $column-width: grid-column-width($columns, if($context, $context, $grid-columns));

  @if $breakpoint {
    @include respond-to($breakpoint) {
      .Grid-item-#{$breakpoint}#{$columns-modifier} {
        width: $column-width;
      }
    }
  } @else {
    .Grid-item#{$columns-modifier} {
      width: $column-width;
    }
  }
}

@include exports("grid") {
  %grid-container {
    font-size: 0;
  }

  %grid-container--padded {
    .Grid-item {
      @extend %grid-item--padded;
    }
  }

  %grid-container--center {
    text-align: center;
  }

  %grid-item {
    @extend %base-font-size;

    display: inline-block;

    width: 100%;

    vertical-align: top;
    text-align: left;
  }

  %grid-item--padded {
    @extend %spacing-gutter-padding-side;
  }
}
